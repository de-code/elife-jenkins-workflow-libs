In order:

- makes sure `stackname` is up and running
- deploys the commit `revision` on `stackname`
- provisions `stackname` again after the code change to make sure all processes are up-to-date.
